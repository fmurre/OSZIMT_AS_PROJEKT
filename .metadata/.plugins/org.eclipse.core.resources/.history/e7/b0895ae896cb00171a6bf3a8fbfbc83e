package application;

import java.sql.SQLException;
import java.util.List;
import java.util.Scanner;

public class IO_fluverw {
	static Scanner sc = new Scanner(System.in);
	//====Neues Objekt====	
	public static void neuobj() throws SQLException {
		//Eingaben
		System.out.println("\n----------Neues Flugzeug hinzufügen-----------");                                            //--Eingabe Beginn
	    System.out.print("\nGeben Sie das Flugzeugmodell ein: ");
	    String modell=sc.next();
	    System.out.print("\nGeben Sie die Sitzplätze des Flugzeugs ein: ");
	    int sitze=sc.nextInt();
	    
	    //nächste freie ID wird aus DB geladen
	    String sqlquery = Sqlquery.getFlugzeuge();
	    List<O_Flugzeug> flugzeuge=DBconnection.showDBflu(sqlquery);
	    
	    int id=1;
	    try {
	    	id=flugzeuge.get(flugzeuge.size()-1).getId()+1;
	    }
	    catch (ArrayIndexOutOfBoundsException e) {
	    	System.out.println("\nDies ist der erste Datensatz. ID=1");
	    }
	    //Flugzeug Objekt erstellen
	    O_Flugzeug flugzeug = new O_Flugzeug(modell, sitze);
	    String newFlugzeug = Sqlquery.newFlugzeug(id, modell, sitze);
	    DBconnection.updateDB(newFlugzeug);
	   
	    //Ausgabe Check
	    System.out.println("\nSie haben folgendes Flugzeug hinzugefügt:");                                                     //--Ausgabe Beginn
	    System.out.println("Flugzeugnummer: "+flugzeug.getId());
	    System.out.println("Modell: "+flugzeug.getModell());
	    System.out.println("Sitzplätze: "+flugzeug.getSitze()); 
	    IO_MainMenu.fortfahren();
	}//end of method neuobj
		
	//====Objekt löschen	
	public static void delobj() throws SQLException {
		int i=0, id=0;
		
		//erzeuge ArrayList mit allen in DB(t_kunden) vorhandenen Einträgen
	    String sqlquery = Sqlquery.getFlugzeuge();
	    List<O_Flugzeug> flugzeuge=DBconnection.showDBflu(sqlquery);
	    
		
		System.out.println("\n----------Flugzeug entfernen-----------");                                            	
	    System.out.print("\nGeben Sie die Nummer des Flugzeugs ein: ");	
	    id=sc.nextInt();
	    
		//Prüfung ob ID vergeben
	    while (i==0) {
	    	for (O_Flugzeug flugzeug: flugzeuge) {//foreach Schleife, für jedes Flugzeugobjekt in Array Flugzeug
	    		if (id==flugzeug.getId()) {
	    			//Ausgabe Check
	    			System.out.println("\nSie löschen folgendes Flugzeug:");
	    		    System.out.println("Flugzeugnummer: "+ id );
	    		    System.out.println("Modell: "+ flugzeug.getModell());
	    		    System.out.println("Sitzplätze: "+ flugzeug.getSitze());
	    		    i=0;
	    		    while (i==0) {//löschen bestätigen
	    		    	System.out.println("Löschen bestätigen (Y/N)");
	    		    	char del=sc.next().toLowerCase().charAt(0);
	    		    	switch (del) {
	    		    	case 'y' ://wird gelöscht
	    			    	i=1;
	    			    	String delete = Sqlquery.delFlugzeug(id);
	    			    	DBconnection.updateDB(delete);
	    			    	System.out.println("Erfolgreich gelöscht");
	    			    break;
	    		    	case 'n' ://wird nicht gelöscht
	    		    		i=1;
	    			    	System.out.println("Löschen beendet");
	    			    break;
	    			    default:
	    			    	i=0;
	    			    }//end of switch
	    			}//end of while
	    		}
	    			
	    	}//end of for
	    	if (i==0) { 
	    		System.out.print("\nDie eingegebene Kundenummer existiert nicht. Geben Sie eine andere ein: (0=Beenden)");
	    		id=sc.nextInt();
	    	}
	    	if (id==0) break;//break weil User 0=beenden gewählt hat
	    }//end of while
	    
		IO_MainMenu.fortfahren();
	}//end of method delobj

	//===Objekt anzeigen
/*		public static void showobj(String[][] flugzeug, String[][] kunde) {
			 System.out.println("\n----------Anzeigen eines Flugzeugs-----------");
			 System.out.print("\nGeben Sie die Nummer des Flugzeugs ein: ");	
			 int nr=sc.nextInt();
			 int i=0;
			 while (i==0) { 
				if ((nr<=24) && (nr>0)) {
						i=1;
						if (flugzeug[nr][0]==null) {
							System.out.println("\nEs gibt kein Flugzeug zu dieser Nummer");
							i=0;
						}
						else i=1;
					}
				    else {
				        System.out.println("Es können maximal 24 Flugzeuge verwaltet werden geben Sie eine Zahl von 1-24 ein:");
				        nr = sc.nextInt();
				        i=0;  
				    } // end of if-else
				} // end of while 
			 if ((flugzeug[nr][0]!=null)&&(flugzeug[nr-1][1]!=null)) {
			      System.out.println("\nFlugzeugnummer: "+(nr));
			      System.out.println("Modell: "+flugzeug[nr][0]);
			      System.out.println("Sitzplätze: "+flugzeug[nr][1]);
			 } // end of if
			 else System.out.println("\nEs gibt kein Flugzeug mit der Nummer "+nr+"\n");	
			 IO_MainMenu.fortfahren(flugzeug, kunde);
		}//end of method showobj
*/
/*	
		public static void showall(String[][] flugzeug, String[][] kunde) {
			System.out.println("\n----------Anzeigen aller Flugzeuge-----------");
		    for (int i=1; i<=24 ;i++ ) {
		      if ((flugzeug[i][0]!=null)&&(flugzeug[i][1]!=null)) {
		        System.out.println("\nFlugzeugnummer: "+(i));
		        System.out.println("Modell: "+flugzeug[i][0]);
		        System.out.println("Sitzplätze: "+flugzeug[i][1]);
		      } // end of if
		    } // end of for
		    IO_MainMenu.fortfahren(flugzeug, kunde);
		}//end of method showall
*/
}//end of class Objektverwaltung
